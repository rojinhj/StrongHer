<script>
    function convertPersianToEnglishNumbers(str) {
        const persianNumbers = ['۰','۱','۲','۳','۴','۵','۶','۷','۸','۹'];
        const englishNumbers = ['0','1','2','3','4','5','6','7','8','9'];

        return str.replace(/[۰-۹]/g, function(w) {
            return englishNumbers[persianNumbers.indexOf(w)];
        });
    }

    function calculateProtein() {
        let weightRaw = document.getElementById('weight').value;
        let weightClean = convertPersianToEnglishNumbers(weightRaw.trim());
        let weight = parseFloat(weightClean);

        let unit = document.getElementById('weightUnit').value;
        let proteinNeed = 0;
        
        if (weight > 0) {
            if (unit === "lbs") {
                proteinNeed = Math.round(weight * 1);
            } else if (unit === "kg") {
                proteinNeed = Math.round(weight * 2.2);
            }
            document.getElementById('result').innerText = `نیاز روزانه شما به پروتئین حدود ${proteinNeed} گرم است.`;
        } else {
            document.getElementById('result').innerText = "لطفاً وزن معتبر وارد کنید.";
        }
    }
</script>
